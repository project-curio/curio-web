<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Curio Hero Slider</title>
  <style>
    :root {
      color-scheme: light;
    }

    .hero-slider {
      --hero-bg: rgba(0, 0, 0, 0.45);
      --hero-overlay-base: #0b1423;
      --hero-overlay-start: rgba(5, 16, 31, 0.82);
      --hero-overlay-mid: rgba(5, 16, 31, 0.65);
      --hero-overlay-end: rgba(5, 16, 31, 0.75);
      --hero-text: #fff;
      --hero-text-subtle: rgba(255, 255, 255, 0.88);
      --hero-accent: rgba(255, 255, 255, 0.95);
      --hero-tag-bg: rgba(255, 255, 255, 0.14);
      --hero-tag-border: rgba(255, 255, 255, 0.24);
      --hero-tag-text: #fff;
      --hero-dot: rgba(255, 255, 255, 0.35);
      --hero-dot-active: rgba(255, 255, 255, 1);
      --hero-search-form-bg: rgba(255, 255, 255, 0.12);
      --hero-search-form-border: rgba(255, 255, 255, 0.25);
      --hero-search-field-bg: rgba(255, 255, 255, 0.95);
      --hero-search-icon-color: rgba(12, 71, 78, 0.55);
      --hero-search-input-color: #0b1423;
      --hero-search-placeholder: rgba(12, 71, 78, 0.5);
      --hero-form-feedback: rgba(255, 255, 255, 0.75);
      --hero-credit-bg: rgba(0, 0, 0, 0.35);
      --hero-credit-text: rgba(255, 255, 255, 0.9);
      --hero-cta-bg: rgba(255, 255, 255, 0.96);
      --hero-cta-color: #082f32;
      --transition-speed: 0.6s;
      --hero-height: 100vh;
      position: relative;
      color: var(--hero-text);
      height: clamp(520px, var(--hero-height), 1100px);
      display: grid;
      place-items: stretch;
      font-family: "Helvetica Neue", Arial, sans-serif;
      margin-bottom: 5rem;
      overflow: hidden;
      isolation: isolate;
    }

    .hero-slider[data-theme="dark"] {
      --hero-bg: rgba(255, 255, 255, 0.72);
      --hero-overlay-base: rgba(240, 244, 246, 0.65);
      --hero-overlay-start: rgba(255, 255, 255, 0.65);
      --hero-overlay-mid: rgba(255, 255, 255, 0.5);
      --hero-overlay-end: rgba(255, 255, 255, 0.65);
      --hero-text: #1f2a30;
      --hero-text-subtle: rgba(31, 42, 48, 0.82);
      --hero-accent: rgba(6, 47, 52, 0.75);
      --hero-tag-bg: rgba(6, 47, 52, 0.12);
      --hero-tag-border: rgba(6, 47, 52, 0.28);
      --hero-tag-text: #12363a;
      --hero-dot: rgba(6, 47, 52, 0.28);
      --hero-dot-active: rgba(6, 47, 52, 0.75);
      --hero-search-form-bg: rgba(255, 255, 255, 0.92);
      --hero-search-form-border: rgba(6, 47, 52, 0.15);
      --hero-search-field-bg: rgba(255, 255, 255, 0.98);
      --hero-search-icon-color: rgba(6, 47, 52, 0.55);
      --hero-search-input-color: #12363a;
      --hero-search-placeholder: rgba(6, 47, 52, 0.5);
      --hero-form-feedback: rgba(32, 36, 40, 0.7);
      --hero-credit-bg: rgba(255, 255, 255, 0.92);
      --hero-credit-text: rgba(32, 36, 40, 0.72);
      --hero-cta-bg: #0D474E;
      --hero-cta-color: #ffffff;
    }

    .hero-slider__slides {
      position: relative;
      width: 100%;
      height: 100%;
    }

    .hero-slider__slide {
      position: absolute;
      inset: 0;
      display: grid;
      align-content: end;
      padding: 0;
      background-color: var(--hero-overlay-base);
      background-image:
        linear-gradient(180deg, var(--hero-overlay-start) 0%, var(--hero-overlay-mid) 55%, var(--hero-overlay-end) 100%),
        var(--hero-image);
      background-size: cover;
      background-position: center;
      opacity: 0;
      transform: translateY(22px);
      transition:
        opacity var(--transition-speed) ease,
        transform var(--transition-speed) ease;
      pointer-events: none;
      color: var(--hero-text);
    }

    .hero-slider__slide.is-active {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }

    @media (prefers-reduced-motion: reduce) {
      .hero-slider__slide {
        transform: none !important;
        transition:
          opacity var(--transition-speed) ease;
      }
    }

    .hero-slider__content {
      position: relative;
      display: grid;
      gap: 1.2rem;
      padding: clamp(5rem, 9vh, 7.5rem) clamp(2.75rem, 6vw, 5rem) clamp(6rem, 12vh, 9rem);
      max-width: min(640px, 90vw);
      z-index: 2;
    }

    .hero-slider__content--no-eyebrow {
      padding-top: clamp(3.5rem, 7vh, 5.5rem);
      padding-bottom: clamp(6.75rem, 12vh, 8.75rem);
      gap: 1.05rem;
    }

    .hero-slider__content--landing {
      max-width: min(768px, 90vw);
    }

    .hero-slider__content--landing.hero-slider__content--no-eyebrow {
      padding-top: clamp(2.25rem, 6vh, 4.25rem);
      padding-bottom: clamp(6.25rem, 11vh, 8.25rem);
    }

    .hero-slider__eyebrow {
      font-size: 0.95rem;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--hero-accent);
      margin-bottom: 0.85rem;
      display: inline-block;
    }

    .hero-slider__title {
      margin: 0 0 0.85rem;
      font-size: clamp(2.25rem, 5vw, 3.75rem);
      line-height: 1.1;
      text-wrap: balance;
    }

    .hero-slider__tagline {
      margin: 0;
      font-size: clamp(1.05rem, 2.8vw, 1.3rem);
      line-height: 1.6;
      color: var(--hero-text-subtle);
    }

    .hero-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin: 0.9rem 0 1.6rem;
      padding: 0;
      list-style: none;
    }

    .hero-tags .tag {
      display: inline-flex;
      align-items: center;
      padding: 0.45rem 0.95rem;
      border-radius: 999px;
      background-color: var(--hero-tag-bg);
      border: 1px solid var(--hero-tag-border);
      color: var(--hero-tag-text);
      font-size: 0.85rem;
      letter-spacing: 0.015em;
    }

    .hero-slider__cta {
      display: inline-flex;
      align-items: center;
      justify-content: flex-start;
      gap: 0.45rem;
      padding: 0.6rem 1rem;
      font-size: 0.9rem;
      font-weight: 600;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--hero-cta-color, #082f32);
      background: var(--hero-cta-bg, rgba(255, 255, 255, 0.96));
      border-radius: 11px;
      text-decoration: none;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.35);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      place-self: start;
      min-width: 0;
      width: auto;
      max-width: max-content;
      margin-top: 7px;
    }

    .hero-slider__cta:hover,
    .hero-slider__cta:focus-visible {
      transform: translateY(-2px);
      box-shadow: 0 14px 32px rgba(0, 0, 0, 0.4);
      color: var(--hero-cta-color, #082f32);
    }

    .hero-slider__cta:focus-visible {
      outline: 2px solid var(--hero-accent);
      outline-offset: 3px;
    }

    .hero-slider__cta-label {
      display: inline-flex;
      align-items: center;
    }

    .hero-slider__cta-icon {
      width: 1.1rem;
      height: 1.1rem;
      stroke: currentColor;
      stroke-width: 1.5;
      fill: none;
    }

    .hero-search {
      display: flex;
      justify-content: flex-start;
      margin-top: 2rem;
    }

    .hero-search-form {
      display: grid;
      gap: var(--space-sm, 0.85rem);
      width: min(560px, 100%);
      padding: var(--space-sm, 0.85rem);
      border-radius: var(--radius-lg, 18px);
      background: var(--hero-search-form-bg);
      border: 1px solid var(--hero-search-form-border);
      backdrop-filter: blur(20px);
      box-shadow: 0 40px 80px rgba(6, 47, 52, 0.35);
    }

    @media (min-width: 640px) {
      .hero-search-form {
        grid-template-columns: 1fr auto;
        align-items: center;
      }
    }

    .hero-search-field {
      position: relative;
      display: flex;
      align-items: center;
      background-color: var(--hero-search-field-bg);
      border-radius: 14px;
      padding-left: 2.75rem;
    }

    .hero-search-field svg {
      position: absolute;
      left: 1rem;
      width: 1.1rem;
      height: 1.1rem;
      color: var(--hero-search-icon-color);
    }

    .hero-search-field input {
      width: 100%;
      border: none;
      background-color: transparent;
      padding: 0.9rem 0.8rem;
      font-size: 1rem;
      color: var(--hero-search-input-color);
    }

    .hero-search-field input::placeholder {
      color: var(--hero-search-placeholder);
    }

    .hero-search-button {
      border: none;
      border-radius: 14px;
      padding: 0.95rem 1.5rem;
      font-size: 1.05rem;
      font-weight: 600;
      color: #fff;
      background: linear-gradient(135deg, #0d474e, #12989f);
      cursor: pointer;
      transition: box-shadow 0.3s ease, opacity 0.3s ease;
    }

    .hero-search-button:hover,
    .hero-search-button:focus-visible {
      box-shadow: 0 18px 36px rgba(12, 71, 78, 0.22);
    }

    .form-feedback {
      margin: 0;
      font-size: 0.85rem;
      color: var(--hero-form-feedback);
    }

    .hero-slider__dots {
      position: absolute;
      bottom: clamp(1.8rem, 4vh, 3rem);
      left: clamp(2.75rem, 6vw, 5rem);
      display: inline-flex;
      gap: 0.75rem;
      z-index: 3;
    }

    .hero-slider__dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: none;
      background: var(--hero-dot);
      padding: 0;
      cursor: pointer;
      transition: transform 0.28s ease, opacity 0.28s ease, background 0.28s ease;
      opacity: 0.75;
    }

    .hero-slider__dot.is-active {
      background: var(--hero-dot-active);
      opacity: 1;
      transform: scale(1.3);
    }

    .hero-slider__dot:focus-visible {
      outline: 2px solid var(--hero-accent);
      outline-offset: 3px;
    }

    @media (max-width: 768px) {
      .hero-slider {
        --hero-height: 94vh;
      }

      .hero-slider__content {
        padding: 3.75rem 2rem 6.5rem;
        gap: 1.05rem;
      }
    }

    @media (max-width: 640px) {
      .hero-slider__dots {
        left: 50%;
        bottom: 1.6rem;
        transform: translateX(-50%);
      }

      .hero-slider__content {
        padding: 3.25rem 1.5rem 6.5rem;
        gap: 1rem;
      }
    }

    .hero-slider__credit {
      position: absolute;
      right: clamp(2.75rem, 6vw, 5rem);
      bottom: clamp(1.8rem, 4vh, 3rem);
      margin: 0;
      padding: 0.35rem 0.75rem;
      font-size: 0.8rem;
      letter-spacing: 0.02em;
      background: var(--hero-credit-bg);
      border-radius: 4px;
      z-index: 3;
      color: var(--hero-credit-text);
    }

    .hero-slider__credit a {
      color: inherit;
      text-decoration: underline;
      transition: opacity 0.2s ease;
    }

    .hero-slider__credit a:hover,
    .hero-slider__credit a:focus-visible {
      opacity: 0.85;
      text-decoration: none;
    }

    @media (max-width: 640px) {
      .hero-slider__credit {
        right: 1.5rem;
        bottom: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <section
    class="hero-slider"
    role="region"
    aria-roledescription="carousel"
    aria-live="polite"
    data-hero-source="./assets/data/hero-slides.json"
  >
    <div class="hero-slider__slides"></div>
  </section>

  <script>
    (function () {
      const slider = document.querySelector(".hero-slider");
      if (!slider) {
        return;
      }

      const dataUrl = slider.getAttribute("data-hero-source") || "./assets/data/hero-slides.json";
      slider.setAttribute("aria-busy", "true");

      loadSlides(dataUrl)
        .then((slidesData) => {
          const normalizedSlides = normalizeSlides(slidesData);
          if (!normalizedSlides.length) {
            slider.removeAttribute("aria-busy");
            return;
          }

          const rendered = renderSlides(slider, normalizedSlides);
          slider.removeAttribute("aria-busy");
          if (!rendered.slides.length) {
            return;
          }
          initializeSlider(slider, rendered.slides, rendered.dots, rendered.activeIndex);
        })
        .catch((error) => {
          slider.removeAttribute("aria-busy");
          console.error(error);
        });

      function loadSlides(url) {
        return fetch(url, { cache: "no-cache" }).then((response) => {
          if (!response.ok) {
            throw new Error(`HeroSlider: Unable to load slide data (${response.status})`);
          }
          return response.json();
        });
      }

      function normalizeSlides(slidesData) {
        const list = Array.isArray(slidesData)
          ? slidesData
          : slidesData && Array.isArray(slidesData.slides)
            ? slidesData.slides
            : null;

        if (!Array.isArray(list)) {
          return [];
        }

        return list.filter((slide) => {
          if (!slide || typeof slide !== "object") {
            return false;
          }
          if (Object.prototype.hasOwnProperty.call(slide, "_comment")) {
            return false;
          }
          return true;
        });
      }

      function resolveTextTheme(slide) {
        if (!slide || typeof slide !== "object") {
          return "light";
        }

        const declaredTheme = typeof slide.textTheme === "string" ? slide.textTheme.trim().toLowerCase() : "";
        if (declaredTheme === "light" || declaredTheme === "dark") {
          return declaredTheme;
        }

        const tone = typeof slide.imageTone === "string" ? slide.imageTone.trim().toLowerCase() : "";
        if (tone === "light") {
          return "dark";
        }

        return "light";
      }

      const HERO_OVERLAY_PRESETS = {
        light: {
          color: [5, 16, 31],
          baseColor: [11, 20, 35],
          start: 0.82,
          mid: 0.65,
          end: 0.75,
          base: 0.75
        },
        dark: {
          color: [255, 255, 255],
          baseColor: [240, 244, 246],
          start: 0.65,
          mid: 0.5,
          end: 0.65,
          base: 0.65
        }
      };

      function resolveButtonColor(buttonColor) {
        const name = typeof buttonColor === "string" ? buttonColor.trim().toLowerCase() : "";
        if (name === "dark") {
          return {
            name,
            backgroundColor: "#0D474E",
            textColor: "#ffffff"
          };
        }

        if (name === "light") {
          return {
            name,
            backgroundColor: "#17856D",
            textColor: "#ffffff"
          };
        }

      return {
        name: "",
        backgroundColor: "",
        textColor: ""
        };
      }

      function resolveOverlayIntensity(value) {
        if (value === undefined || value === null || value === "") {
          return null;
        }

        const numeric = Number(value);
        if (!Number.isFinite(numeric)) {
          return null;
        }
        return Math.min(1, Math.max(0, numeric));
      }

      function applyOverlayIntensity(element, theme, intensity) {
        const preset = HERO_OVERLAY_PRESETS[theme];
        if (!preset) {
          return;
        }

        const rgba = (color, alpha) => `rgba(${color[0]}, ${color[1]}, ${color[2]}, ${alpha})`;
        const scaleAlpha = (alpha) => Number((alpha * intensity).toFixed(3));

        if (typeof preset.start === "number") {
          element.style.setProperty("--hero-overlay-start", rgba(preset.color, scaleAlpha(preset.start)));
        }
        if (typeof preset.mid === "number") {
          element.style.setProperty("--hero-overlay-mid", rgba(preset.color, scaleAlpha(preset.mid)));
        }
        if (typeof preset.end === "number") {
          element.style.setProperty("--hero-overlay-end", rgba(preset.color, scaleAlpha(preset.end)));
        }
        const baseAlpha = typeof preset.base === "number" ? preset.base : preset.start;
        if (typeof baseAlpha === "number") {
          element.style.setProperty(
            "--hero-overlay-base",
            rgba(preset.baseColor || preset.color, scaleAlpha(baseAlpha))
          );
        }
      }

      function resolveAssetUrl(path) {
        if (!path || typeof path !== "string") {
          return "";
        }

        const trimmed = path.trim();
        if (/^(?:https?:)?\/\//i.test(trimmed) || trimmed.startsWith("data:") || trimmed.startsWith("blob:")) {
          return trimmed;
        }

        try {
          const url = new URL(trimmed, document.baseURI);
          return url.href;
        } catch (error) {
          console.warn("HeroSlider: unable to resolve asset URL", path, error);
          return trimmed;
        }
      }

      function updateRootTheme(sliderEl, slides, index) {
        if (!Array.isArray(slides) || !slides.length) {
          sliderEl.removeAttribute("data-theme");
          return;
        }

        const activeSlide = slides[index];
        if (!activeSlide) {
          sliderEl.removeAttribute("data-theme");
          return;
        }

        const theme = activeSlide.dataset.textTheme === "dark" ? "dark" : "light";
        sliderEl.setAttribute("data-theme", theme);
      }

      function renderSlides(sliderEl, slidesData) {
        if (!Array.isArray(slidesData) || !slidesData.length) {
          return {
            slides: [],
            dots: [],
            activeIndex: 0
          };
        }

        let slidesContainer = sliderEl.querySelector(".hero-slider__slides");
        if (!slidesContainer) {
          slidesContainer = document.createElement("div");
          slidesContainer.className = "hero-slider__slides";
          sliderEl.appendChild(slidesContainer);
        }
        slidesContainer.innerHTML = "";

        const existingDots = sliderEl.querySelector(".hero-slider__dots");
        if (existingDots) {
          existingDots.remove();
        }

        const dotsContainer = document.createElement("div");
        dotsContainer.className = "hero-slider__dots";
        dotsContainer.setAttribute("role", "tablist");
        dotsContainer.setAttribute("aria-label", "Hero slider navigation");

        let activeIndex = slidesData.findIndex((item) => Boolean(item.isActive));
        if (activeIndex < 0) {
          activeIndex = 0;
        }

        slidesData.forEach((data, index) => {
          const slideId = data.id || `hero-slide-${index + 1}`;
          const slide = document.createElement("article");
          slide.className = "hero-slider__slide";
          slide.id = slideId;
          slide.setAttribute("aria-label", data.ariaLabel || data.title || `Slide ${index + 1}`);
          slide.setAttribute("aria-hidden", "true");
          if (data.image) {
            slide.style.setProperty("--hero-image", `url("${resolveAssetUrl(data.image)}")`);
          }

          const textTheme = resolveTextTheme(data);
          slide.dataset.textTheme = textTheme;
          const tone = typeof data.imageTone === "string" ? data.imageTone.trim().toLowerCase() : "";
          if (tone) {
            slide.dataset.imageTone = tone;
          }

          const buttonStyle = resolveButtonColor(data.buttonColor);
          if (buttonStyle.name) {
            slide.dataset.buttonColor = buttonStyle.name;
          }
          if (buttonStyle.backgroundColor) {
            slide.style.setProperty("--hero-cta-bg", buttonStyle.backgroundColor);
          }
          if (buttonStyle.textColor) {
            slide.style.setProperty("--hero-cta-color", buttonStyle.textColor);
          }

          const overlayIntensity = resolveOverlayIntensity(data.overlayIntensity);
          if (overlayIntensity !== null) {
            applyOverlayIntensity(slide, textTheme, overlayIntensity);
          }

          const content = document.createElement("div");
          content.className = "hero-slider__content";

          if (data.eyebrow) {
            const eyebrow = document.createElement("span");
            eyebrow.className = "hero-slider__eyebrow";
            eyebrow.textContent = data.eyebrow;
            content.appendChild(eyebrow);
          } else {
            content.classList.add("hero-slider__content--no-eyebrow");
          }

          if (data.id === "landing-slide") {
            content.classList.add("hero-slider__content--landing");
          }

          const heading = document.createElement(index === 0 ? "h1" : "h2");
          heading.className = "hero-slider__title";
          heading.textContent = data.title || "";
          content.appendChild(heading);

          if (data.tagline) {
            const tagline = document.createElement("p");
            tagline.className = "hero-slider__tagline";
            tagline.textContent = data.tagline;
            content.appendChild(tagline);
          }

          if (data.ctaText) {
            const cta = document.createElement("a");
            cta.className = "hero-slider__cta";
            cta.href = data.buttonHref || data.ctaHref || "#";

            const label = document.createElement("span");
            label.className = "hero-slider__cta-label";
            label.textContent = data.ctaText;
            cta.appendChild(label);

            const icon = createIcon(data.ctaIcon);
            if (icon) {
              cta.appendChild(icon);
            }

            content.appendChild(cta);
          }

          if (Array.isArray(data.tags) && data.tags.length) {
            const tagsList = document.createElement("div");
            tagsList.className = "hero-tags tags";
            tagsList.setAttribute("aria-label", data.tagsLabel || "Top cultural themes");

            data.tags.forEach((tagText) => {
              const tag = document.createElement("span");
              tag.className = "tag";
              tag.textContent = tagText;
              tagsList.appendChild(tag);
            });

            content.appendChild(tagsList);
          }

          if (data.includeSearch) {
            const search = createSearchForm(data, index);
            content.appendChild(search);
          }

          slide.appendChild(content);

          if (data.credit) {
            const credit = document.createElement("p");
            credit.className = "hero-slider__credit";

            if (typeof data.credit === "string") {
              credit.textContent = data.credit;
            } else {
              const prefix = data.credit.prefix || "Photo";
              if (prefix) {
                credit.append(document.createTextNode(`${prefix}: `));
              }

              if (data.credit.name) {
                if (data.credit.profileUrl) {
                  const profileLink = document.createElement("a");
                  profileLink.href = data.credit.profileUrl;
                  profileLink.target = "_blank";
                  profileLink.rel = "noopener noreferrer";
                  profileLink.textContent = data.credit.name;
                  credit.append(profileLink);
                } else {
                  credit.append(document.createTextNode(data.credit.name));
                }
              } else if (data.credit.text) {
                credit.append(document.createTextNode(data.credit.text));
              }

              if (data.credit.imageUrl) {
                if (data.credit.name || data.credit.text) {
                  credit.append(document.createTextNode(" · "));
                }
                const imageLink = document.createElement("a");
                imageLink.href = data.credit.imageUrl;
                imageLink.target = "_blank";
                imageLink.rel = "noopener noreferrer";
                imageLink.textContent = data.credit.imageLabel || "View image";
                credit.append(imageLink);
              } else if (data.credit.source) {
                const sourceText = data.credit.name || data.credit.text ? ` · ${data.credit.source}` : data.credit.source;
                credit.append(document.createTextNode(sourceText));
              }
            }

            slide.appendChild(credit);
          }

          slidesContainer.appendChild(slide);

          const dot = document.createElement("button");
          dot.type = "button";
          dot.className = "hero-slider__dot";
          dot.setAttribute("aria-label", `Slide ${index + 1} of ${slidesData.length}`);
          dot.setAttribute("aria-controls", slideId);
          dot.setAttribute("aria-pressed", "false");
          dotsContainer.appendChild(dot);
        });

        sliderEl.appendChild(dotsContainer);

        return {
          slides: Array.from(slidesContainer.children),
          dots: Array.from(dotsContainer.children),
          activeIndex
        };
      }

      function createSearchForm(data, index) {
        const wrapper = document.createElement("div");
        wrapper.className = "hero-search";

        const form = document.createElement("form");
        form.className = "hero-search-form";
        form.setAttribute("data-js", "search-form");
        form.method = data.searchMethod || "get";
        form.action = data.searchAction || "#";

        const field = document.createElement("div");
        field.className = "hero-search-field";

        const searchId = `${data.id || `hero-slide-${index + 1}`}-search`;

        const label = document.createElement("label");
        label.className = "sr-only";
        label.setAttribute("for", searchId);
        label.textContent = data.searchLabel || "Search cultural places";

        const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        svg.setAttribute("aria-hidden", "true");
        svg.setAttribute("viewBox", "0 0 24 24");
        const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
        path.setAttribute("d", "M21 21l-4.35-4.35m1.35-3.65a6 6 0 1 0-12 0 6 6 0 0 0 12 0Z");
        path.setAttribute("fill", "none");
        path.setAttribute("stroke", "currentColor");
        path.setAttribute("stroke-width", "1.5");
        path.setAttribute("stroke-linecap", "round");
        path.setAttribute("stroke-linejoin", "round");
        svg.appendChild(path);

        const input = document.createElement("input");
        input.id = searchId;
        input.type = "search";
        input.name = data.searchName || "q";
        input.autocomplete = "off";
        input.inputMode = "search";
        input.enterKeyHint = "search";
        input.placeholder = data.searchPlaceholder || "Try “quiet morning in Minneapolis” or “design in Detroit”";

        field.append(label, svg, input);

        const submit = document.createElement("button");
        submit.className = "hero-search-button";
        submit.type = "submit";
        submit.textContent = data.searchButtonLabel || "Find places to explore";

        const feedback = document.createElement("p");
        feedback.className = "form-feedback";
        feedback.setAttribute("data-js", "search-feedback");
        feedback.setAttribute("role", "status");
        feedback.setAttribute("aria-live", "polite");

        form.append(field, submit, feedback);
        wrapper.appendChild(form);
        return wrapper;
      }

      function createIcon(name) {
        const icons = {
          "arrow-right": ["M5 12h14", "M12 5l7 7-7 7"]
        };

        const paths = icons[name] || icons["arrow-right"];
        const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        svg.setAttribute("class", "hero-slider__cta-icon");
        svg.setAttribute("viewBox", "0 0 24 24");
        svg.setAttribute("aria-hidden", "true");

        paths.forEach((d) => {
          const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
          path.setAttribute("d", d);
          path.setAttribute("fill", "none");
          path.setAttribute("stroke", "currentColor");
          path.setAttribute("stroke-width", "1.5");
          path.setAttribute("stroke-linecap", "round");
          path.setAttribute("stroke-linejoin", "round");
          svg.appendChild(path);
        });

        return svg;
      }

      function initializeSlider(sliderEl, slides, dots, initialIndex) {
        if (!slides.length) {
          return;
        }

        const autoAdvanceDelay = 7000;
        const manualPauseDelay = 10000;
        let currentIndex = Math.max(0, Math.min(initialIndex, slides.length - 1));
        let advanceTimer = null;
        let isDocumentVisible = document.visibilityState === "visible";

        slides.forEach((slide, index) => {
          const isActive = index === currentIndex;
          slide.classList.toggle("is-active", isActive);
          slide.setAttribute("aria-hidden", String(!isActive));
        });

        dots.forEach((dot, index) => {
          const isActive = index === currentIndex;
          dot.classList.toggle("is-active", isActive);
          dot.setAttribute("aria-pressed", isActive ? "true" : "false");
          dot.addEventListener("click", () => handleDotInteraction(index));
          dot.addEventListener("keydown", (event) => {
            if (event.key === "Enter" || event.key === " ") {
              event.preventDefault();
              handleDotInteraction(index);
            }
          });
        });

        updateRootTheme(sliderEl, slides, currentIndex);

        function handleDotInteraction(index) {
          setActiveSlide(index);
          scheduleAdvance(manualPauseDelay);
        }

        function setActiveSlide(index) {
          if (index === currentIndex || index < 0 || index >= slides.length) {
            return;
          }

          const previousSlide = slides[currentIndex];
          const previousDot = dots[currentIndex];
          previousSlide.classList.remove("is-active");
          previousSlide.setAttribute("aria-hidden", "true");
          if (previousDot) {
            previousDot.classList.remove("is-active");
            previousDot.setAttribute("aria-pressed", "false");
          }

          currentIndex = index;

          const nextSlide = slides[currentIndex];
          const nextDot = dots[currentIndex];
          nextSlide.classList.add("is-active");
          nextSlide.setAttribute("aria-hidden", "false");
          if (nextDot) {
            nextDot.classList.add("is-active");
            nextDot.setAttribute("aria-pressed", "true");
          }

          updateRootTheme(sliderEl, slides, currentIndex);
        }

        function scheduleAdvance(delay) {
          clearTimeout(advanceTimer);
          if (!isDocumentVisible) {
            return;
          }

          advanceTimer = window.setTimeout(() => {
            const nextIndex = (currentIndex + 1) % slides.length;
            setActiveSlide(nextIndex);
            scheduleAdvance(autoAdvanceDelay);
          }, delay);
        }

        function handlePointerEnter() {
          clearTimeout(advanceTimer);
          advanceTimer = null;
        }

        function handlePointerLeave() {
          if (!advanceTimer) {
            scheduleAdvance(autoAdvanceDelay);
          }
        }

        function handleVisibilityChange() {
          isDocumentVisible = document.visibilityState === "visible";
          if (isDocumentVisible) {
            scheduleAdvance(autoAdvanceDelay);
          } else if (advanceTimer) {
            clearTimeout(advanceTimer);
            advanceTimer = null;
          }
        }

        sliderEl.addEventListener("mouseenter", handlePointerEnter);
        sliderEl.addEventListener("mouseleave", handlePointerLeave);
        sliderEl.addEventListener("focusin", handlePointerEnter);
        sliderEl.addEventListener("focusout", handlePointerLeave);
        document.addEventListener("visibilitychange", handleVisibilityChange);

        scheduleAdvance(autoAdvanceDelay);
      }
    })();
  </script>
</body>
</html>
